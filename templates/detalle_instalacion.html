{% extends "base.html" %}

{% block title %}Detalles de la Instalación{% endblock %}

{% block content %}
<div class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
            {% for category, message in messages %}
                <li class="alert alert-{{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <div class="main-content-card">
        <h1>{{ instalacion.nombre }}</h1>
        <div class="info-group">
            <strong>Descripción:</strong>
            <p>{{ instalacion.descripcion }}</p>
        </div>
        <div class="info-group">
            <strong>Estado:</strong>
            <span class="card-status status-{{ instalacion.estado|lower|replace(' ', '-') }}">
                {{ instalacion.estado }}
            </span>
        </div>
        {% if instalacion.imagen_url %}
        <div class="info-group">
            <strong>Imagen de Referencia:</strong>
            <img src="{{ url_for('static', filename='uploads/' + instalacion.imagen_url.split('/')[-1]) }}" alt="Imagen de la instalación" style="max-width: 100%; height: auto; border-radius: 8px; margin-top: 10px;">
        </div>
        {% endif %}

        <h2 class="form-section-title mt-6">Reservar Horario</h2>
        <form action="{{ url_for('reservar') }}" method="POST" class="form-reserva">
            <input type="hidden" name="id_instalacion" value="{{ instalacion.id_instalacion }}">
            <div class="form-group">
                <label for="fecha">Fecha:</label>
                <input type="date" id="fecha" name="fecha" required>
            </div>
            <div class="form-group">
                <label for="hora_inicio">Hora de inicio:</label>
                <input type="time" id="hora_inicio" name="hora_inicio" required>
            </div>
            <div class="form-group">
                <label for="hora_fin">Hora de fin:</label>
                <input type="time" id="hora_fin" name="hora_fin" required>
            </div>
            <button type="submit" class="btn btn-primary">Reservar</button>
        </form>
    </div>
</div>
{% endblock %}